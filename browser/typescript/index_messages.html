<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>index_messages</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    function dartMessage() {
      let button = document.querySelector('#body');
      let div = document.querySelector('#receiveMessage');
      window.chrome.webview.addEventListener('message', (json) => {
        let data = JSON.parse(json);
        div.innerHTML = json;
        data.webview = 'Hallo world WebView';
        data.message = 'resend';
        window.chrome.webview.postMessage(JSON.stringify(data));
      });
      button.addEventListener('click', () => window.chrome.webview.postMessage('{"message":"webview", "number": 1.3, "bool": true, "string": "string"}'));
    }
    dartMessage();

  </script>
</head>

<body id="body">
  <div id="receiveMessage"></div>
</body>


</html>